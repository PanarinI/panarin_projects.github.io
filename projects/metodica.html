<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Metodica | Игорь Панарин</title>
  <!-- Подключаем Mermaid в head -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <style>
    .mermaid {
      font-family: Arial, sans-serif;
      margin: 20px 0;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
  </style>
</head>

<body>
  <main>
    <article class="project-details">
      <h1>Metodica</h1>
      <ul>
        <li><strong>Результат:</strong> ускорение подготовки уроков до 1 минуты</li>
        <li><strong>Технологии:</strong> responses API · vision · Gradio · prompting</li>
        <li><strong>Роль:</strong> полный цикл разработки и UX-дизайн</li>
      </ul>

      <!-- Диаграмма Mermaid -->
      <div class="mermaid">
        %%{init: {'theme': 'redux', 'flowchart': {'layout': 'fixed'}}}%%
        flowchart LR
         subgraph UI["Gradio UI"]
                A1["Загрузка изображения\n(img1, img2, img3)"]
                A2["Форма параметров\n(textbook, …, web_search)"]
                A3["Кнопка «Создать план»"]
                A4["Вывод HTML-плана"]
                A5["Кнопка «Скачать .docx»"]
                A6["Форма обратной связи"]
          end
         subgraph Backend["Python Backend"]
            direction TB
                K1["Методические инструкции"]
                K2["База знаний"]
                B2["Промпт"]
                B3["LLM-сервис\n(GPT‑4.1 / o4‑mini)"]
                B4["generate_docx"]
                B5["save_feedback → Google Sheets"]
                B1["upload_to_catbox"]
          end
            A1 -- bytes --> B1
            B1 -- image_URL --> B2
            A2 -- params --> B2
            K1 --> B2
            K2 --> B2
            B2 -- responses API --> B3
            B3 -- text plan --> A4 & B4
            B4 -- ".docx path" --> A5
            A6 -- comment, rate --> B5
      </div>
    </article>
  </main>

  <script>
    // Инициализация Mermaid после полной загрузки страницы
    document.addEventListener('DOMContentLoaded', () => {
      mermaid.initialize({
        theme: 'redux',
        flowchart: {
          layout: 'fixed',
          useMaxWidth: false
        },
        startOnLoad: true
      });
    });
  </script>
</body>
</html>